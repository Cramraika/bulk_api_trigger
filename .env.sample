#############################
# Deployment / Mode
#############################
# Any of these signals auto-enable deployment mode
DEPLOYMENT_MODE=true
REPORT_PATH=/app/data/reports
# DOCKER_CONTAINER=true
# RAILWAY_ENVIRONMENT=production

#############################
# CSV / Watchdog
#############################
WATCHDOG_ENABLED=true
WATCH_PATHS=/app/data/csv
AUTO_PROCESS=true
DEBOUNCE_DELAY=3.0
CSV_FILE=AUTO                       # "AUTO" scans folders; or provide /path/to/file.csv
CSV_FILE_PATTERNS=/app/data/csv/*.csv,/app/data/*.csv
CSV_CHUNK_SIZE=1000
CSV_REQUIRED_COLUMNS=webhook_url
CSV_OPTIONAL_COLUMNS=method,payload,header,name,group
SKIP_ROWS=0

#############################
# Concurrency / Rate Limits
#############################
BASE_RATE_LIMIT=3.0                 # requests per second (baseline)
STARTING_RATE_LIMIT=3.0
MAX_RATE_LIMIT=5.0
WINDOW_SIZE=20                      # error window size
ERROR_THRESHOLD=0.3                 # if > this, slow down; if < this/2, speed up
MAX_WORKERS=3                       # per-file worker pool
PROCESSING_WORKERS=5                # number of file-processing workers
GLOBAL_MAX_REQUESTS=20              # global cap across all jobs (0 = unlimited)

#############################
# Retries / Timeouts / UX
#############################
MAX_RETRIES=3
REQUEST_TIMEOUT=30
# Base retry backoff in seconds (exponential backoff uses this as the starting delay)
RETRY_DELAY=1.0
PROGRESS_EVERY_N=50
FORCE_TQDM=0                        # set 1 to force progress bar in non-TTY logs

#############################
# Logging
#############################
LOG_LEVEL=INFO                      # DEBUG, INFO, WARNING, ERROR
MAX_LOG_SIZE_MB=100                 # requires Patch #3 to be effective

#############################
# Notifications (Slack)
#############################
SLACK_NOTIFICATIONS=false
SLACK_WEBHOOK_URL=
SLACK_NOTIFY_COMPLETION=true
SLACK_NOTIFY_FILE_DETECTED=true
SLACK_NOTIFY_PROGRESS=false
SLACK_PROGRESS_EVERY_N=25
SLACK_PROGRESS_URGENCY=auto         # low|normal|high|critical|auto
# Extra error alerts (only if Patch #5 enabled)
SLACK_NOTIFY_ERRORS=false

#############################
# Notifications (Email)
#############################
EMAIL_NOTIFICATIONS=false
EMAIL_SMTP_SERVER=smtp.gmail.com
EMAIL_SMTP_PORT=465                 # 465 (SSL) or 587 (STARTTLS)
EMAIL_USERNAME=
EMAIL_PASSWORD=
EMAIL_FROM=
EMAIL_RECIPIENTS=
EMAIL_NOTIFY_COMPLETION=true
EMAIL_NOTIFY_FILE_DETECTED=false
# Extra error alerts (only if Patch #5 enabled)
EMAIL_NOTIFY_ERRORS=false

#############################
# Database / Backups
#############################
DATABASE_ENABLED=true
DATABASE_PATH=/app/data/webhook_results.db
# Either name works if Patch #2 is applied; otherwise use DATABASE_BACKUP
DATABASE_BACKUP=true
DATABASE_BACKUP_ENABLED=true
DATABASE_BACKUP_INTERVAL_HOURS=24

#############################
# Health / Metrics
#############################
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true

#############################
# Archiving / Folders
#############################
ARCHIVE_PROCESSED=true
ARCHIVE_PATH=/app/data/csv/processed
DUPLICATES_PATH=/app/data/csv/duplicates
REJECTED_PATH=/app/data/csv/rejected
